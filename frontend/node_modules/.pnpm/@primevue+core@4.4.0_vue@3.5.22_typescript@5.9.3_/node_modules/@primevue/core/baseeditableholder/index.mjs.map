{"version":3,"file":"index.mjs","sources":["../../src/baseeditableholder/BaseEditableHolder.vue"],"sourcesContent":["<script>\nimport { isNotEmpty } from '@primeuix/utils';\nimport BaseComponent from '@primevue/core/basecomponent';\n\nexport default {\n    name: 'BaseEditableHolder',\n    extends: BaseComponent,\n    emits: ['update:modelValue', 'value-change'],\n    props: {\n        modelValue: {\n            type: null,\n            default: undefined\n        },\n        defaultValue: {\n            type: null,\n            default: undefined\n        },\n        name: {\n            type: String,\n            default: undefined\n        },\n        invalid: {\n            type: Boolean,\n            default: undefined\n        },\n        disabled: {\n            type: Boolean,\n            default: false\n        },\n        formControl: {\n            type: Object,\n            default: undefined\n        }\n    },\n    inject: {\n        $parentInstance: {\n            default: undefined\n        },\n        $pcForm: {\n            default: undefined\n        },\n        $pcFormField: {\n            default: undefined\n        }\n    },\n    data() {\n        return {\n            d_value: this.defaultValue !== undefined ? this.defaultValue : this.modelValue\n        };\n    },\n    watch: {\n        modelValue: {\n            deep: true,\n            handler(newValue) {\n                this.d_value = newValue;\n            }\n        },\n        defaultValue(newValue) {\n            this.d_value = newValue;\n        },\n        $formName: {\n            immediate: true,\n            handler(newValue) {\n                this.formField = this.$pcForm?.register?.(newValue, this.$formControl) || {};\n            }\n        },\n        $formControl: {\n            immediate: true,\n            handler(newValue) {\n                this.formField = this.$pcForm?.register?.(this.$formName, newValue) || {};\n            }\n        },\n        $formDefaultValue: {\n            immediate: true,\n            handler(newValue) {\n                this.d_value !== newValue && (this.d_value = newValue);\n            }\n        },\n        $formValue: {\n            immediate: false,\n            handler(newValue) {\n                if (this.$pcForm?.getFieldState(this.$formName) && newValue !== this.d_value) {\n                    this.d_value = newValue;\n                }\n            }\n        }\n    },\n    formField: {},\n    methods: {\n        writeValue(value, event) {\n            if (this.controlled) {\n                this.d_value = value;\n                this.$emit('update:modelValue', value);\n            }\n\n            this.$emit('value-change', value);\n\n            this.formField.onChange?.({ originalEvent: event, value });\n        },\n        // @todo move to @primeuix/utils\n        findNonEmpty(...values) {\n            return values.find(isNotEmpty);\n        }\n    },\n    computed: {\n        $filled() {\n            return isNotEmpty(this.d_value);\n        },\n        $invalid() {\n            return !this.$formNovalidate && this.findNonEmpty(this.invalid, this.$pcFormField?.$field?.invalid, this.$pcForm?.getFieldState(this.$formName)?.invalid);\n        },\n        $formName() {\n            return !this.$formNovalidate ? this.name || this.$formControl?.name : undefined;\n        },\n        $formControl() {\n            return this.formControl || this.$pcFormField?.formControl;\n        },\n        $formNovalidate() {\n            return this.$formControl?.novalidate;\n        },\n        $formDefaultValue() {\n            return this.findNonEmpty(this.d_value, this.$pcFormField?.initialValue, this.$pcForm?.initialValues?.[this.$formName]);\n        },\n        $formValue() {\n            return this.findNonEmpty(this.$pcFormField?.$field?.value, this.$pcForm?.getFieldState(this.$formName)?.value);\n        },\n        controlled() {\n            return this.$inProps.hasOwnProperty('modelValue') || (!this.$inProps.hasOwnProperty('modelValue') && !this.$inProps.hasOwnProperty('defaultValue'));\n        },\n        // @deprecated use $filled instead\n        filled() {\n            return this.$filled;\n        }\n    }\n};\n</script>\n"],"names":["name","BaseComponent","emits","props","modelValue","type","undefined","defaultValue","String","invalid","Boolean","disabled","formControl","Object","inject","$parentInstance","$pcForm","$pcFormField","data","d_value","watch","deep","handler","newValue","$formName","immediate","_this$$pcForm","_this$$pcForm$registe","formField","register","call","$formControl","_this$$pcForm2","_this$$pcForm2$regist","$formDefaultValue","$formValue","_this$$pcForm3","getFieldState","methods","writeValue","value","event","_this$formField$onCha","_this$formField","controlled","$emit","onChange","originalEvent","findNonEmpty","_len","arguments","length","values","Array","_key","find","isNotEmpty","computed","$filled","$invalid","_this$$pcFormField","_this$$pcForm4","$formNovalidate","$field","_this$$formControl","_this$$pcFormField2","_this$$formControl2","novalidate","_this$$pcFormField3","_this$$pcForm5","initialValue","initialValues","_this$$pcFormField4","_this$$pcForm6","$inProps","hasOwnProperty","filled"],"mappings":"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"}