import{d as F,r as y,e as g,f as L,g as B,c as m,a as e,b as c,w as k,h as $,i as a,v as n,j as I,F as _,k as D,l as x,u as p,t as r,m as S,n as A,p as M,o as d,I as b}from"./index-zronXHME.js";const O={class:"mb-6"},P={class:"flex items-center justify-between"},E={class:"bg-white shadow-sm rounded-lg p-6"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q=["value"],W={class:"flex items-center justify-between mb-4"},X={class:"overflow-hidden border border-gray-200 rounded-lg"},Y={class:"min-w-full divide-y divide-gray-200"},Z={class:"bg-white divide-y divide-gray-200"},z={class:"px-4 py-3"},G=["onUpdate:modelValue"],H={class:"px-4 py-3"},K=["onUpdate:modelValue"],ee={class:"px-4 py-3"},te=["onUpdate:modelValue"],se={class:"px-4 py-3 text-gray-900 font-medium"},oe={class:"px-4 py-3 text-center"},le=["onClick"],ae={class:"border-t border-gray-200 pt-6"},ne={class:"flex justify-end"},re={class:"w-64 space-y-2"},de={class:"flex justify-between text-sm"},ie={class:"font-medium"},ue={class:"flex justify-between text-sm"},me={class:"text-gray-500"},ce={class:"font-medium"},pe={class:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2"},be={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xe={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},ve=["disabled"],fe=F({__name:"InvoiceCreateView",setup(ye){const V=M(),C=B(),u=y(!1),s=y({number:"",clientId:"",date:new Date().toISOString().split("T")[0],dueDate:"",status:"draft",taxRate:0,notes:"",lineItems:[{description:"Web Development Services",quantity:1,rate:0}]}),T=y([{id:1,name:"John Smith",email:"john.smith@email.com",company:"Smith Consulting LLC",documentType:"passport",documentNumber:"P123456789"},{id:2,name:"Sarah Johnson",email:"sarah.johnson@techcorp.com",company:"TechCorp Solutions",documentType:"driver_license",documentNumber:"DL987654321"},{id:3,name:"Michael Brown",email:"michael.brown@startup.io",company:"StartupXYZ Inc",documentType:"national_id",documentNumber:"ID456789123"}]),v=g(()=>s.value.lineItems.reduce((l,t)=>l+t.quantity*t.rate,0).toFixed(2)),f=g(()=>(parseFloat(v.value)*(s.value.taxRate/100)).toFixed(2)),U=g(()=>(parseFloat(v.value)+parseFloat(f.value)).toFixed(2)),q=l=>(l.quantity*l.rate).toFixed(2),R=()=>{s.value.lineItems.push({description:"",quantity:1,rate:0})},j=l=>{s.value.lineItems.length>1&&s.value.lineItems.splice(l,1)},N=async()=>{u.value=!0;try{console.log("Creating invoice:",s.value),await new Promise(l=>setTimeout(l,1e3)),V.push("/app/invoices")}catch(l){console.error("Error creating invoice:",l)}finally{u.value=!1}};return L(()=>{s.value.number=`INV-${String(Date.now()).slice(-6)}`;const l=new Date;l.setDate(l.getDate()+30),s.value.dueDate=l.toISOString().split("T")[0];const t=C.query.client;t&&(s.value.clientId=String(t))}),(l,t)=>{const w=A("router-link");return d(),m("div",null,[e("div",O,[e("div",P,[t[8]||(t[8]=e("div",null,[e("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Create Invoice "),e("p",{class:"mt-1 text-sm text-gray-500"}," Create a new invoice for your client ")],-1)),c(w,{to:"/app/invoices",class:"inline-flex items-center rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700"},{default:k(()=>[c(p(b),{icon:"mdi:arrow-left",class:"w-4 h-4 mr-2"}),t[7]||(t[7]=x(" Back to Invoices ",-1))]),_:1})])]),e("div",E,[e("form",{onSubmit:$(N,["prevent"]),class:"space-y-6"},[e("div",J,[e("div",null,[t[9]||(t[9]=e("label",{for:"number",class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Number * ",-1)),a(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.number=o),id:"number",type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"INV-001"},null,512),[[n,s.value.number]])]),e("div",null,[t[11]||(t[11]=e("label",{for:"client",class:"block text-sm font-medium text-gray-700 mb-2"}," Client * ",-1)),a(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.clientId=o),id:"client",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[t[10]||(t[10]=e("option",{value:""},"Select client",-1)),(d(!0),m(_,null,D(T.value,o=>(d(),m("option",{key:o.id,value:o.id},r(o.name),9,Q))),128))],512),[[I,s.value.clientId]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Date * ",-1)),a(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.date=o),id:"date",type:"date",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,s.value.date]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"dueDate",class:"block text-sm font-medium text-gray-700 mb-2"}," Due Date * ",-1)),a(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.dueDate=o),id:"dueDate",type:"date",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,s.value.dueDate]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),a(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.status=o),id:"status",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...t[14]||(t[14]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"overdue"},"Overdue",-1)])],512),[[I,s.value.status]])])]),e("div",null,[e("div",W,[t[17]||(t[17]=e("h3",{class:"text-lg font-medium text-gray-900"},"Line Items",-1)),e("button",{type:"button",onClick:R,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[c(p(b),{icon:"mdi:plus",class:"w-4 h-4 mr-2"}),t[16]||(t[16]=x(" Add Item ",-1))])]),e("div",X,[e("table",Y,[t[18]||(t[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rate "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Z,[(d(!0),m(_,null,D(s.value.lineItems,(o,h)=>(d(),m("tr",{key:h},[e("td",z,[a(e("input",{"onUpdate:modelValue":i=>o.description=i,type:"text",class:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"Item description"},null,8,G),[[n,o.description]])]),e("td",H,[a(e("input",{"onUpdate:modelValue":i=>o.quantity=i,type:"number",min:"0",step:"0.01",class:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"0"},null,8,K),[[n,o.quantity,void 0,{number:!0}]])]),e("td",ee,[a(e("input",{"onUpdate:modelValue":i=>o.rate=i,type:"number",min:"0",step:"0.01",class:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"0.00"},null,8,te),[[n,o.rate,void 0,{number:!0}]])]),e("td",se," $"+r(q(o)),1),e("td",oe,[e("button",{type:"button",onClick:i=>j(h),class:"text-red-600 hover:text-red-900"},[c(p(b),{icon:"mdi:delete",class:"w-4 h-4"})],8,le)])]))),128))])])])]),e("div",ae,[e("div",ne,[e("div",re,[e("div",de,[t[19]||(t[19]=e("span",{class:"text-gray-500"},"Subtotal:",-1)),e("span",ie,"$"+r(v.value),1)]),e("div",ue,[e("span",me,"Tax ("+r(s.value.taxRate)+"%):",1),e("span",ce,"$"+r(f.value),1)]),e("div",pe,[t[20]||(t[20]=e("span",null,"Total:",-1)),e("span",null,"$"+r(U.value),1)])])])]),e("div",be,[e("div",null,[t[21]||(t[21]=e("label",{for:"taxRate",class:"block text-sm font-medium text-gray-700 mb-2"}," Tax Rate (%) ",-1)),a(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.taxRate=o),id:"taxRate",type:"number",min:"0",max:"100",step:"0.01",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"0.00"},null,512),[[n,s.value.taxRate,void 0,{number:!0}]])])]),e("div",null,[t[22]||(t[22]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),a(e("textarea",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.value.notes=o),id:"notes",rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Additional notes for the invoice"},null,512),[[n,s.value.notes]])]),e("div",xe,[c(w,{to:"/app/invoices",class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:k(()=>[...t[23]||(t[23]=[x(" Cancel ",-1)])]),_:1}),e("button",{type:"submit",disabled:u.value,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50"},[u.value?(d(),S(p(b),{key:0,icon:"mdi:loading",class:"w-4 h-4 mr-2 animate-spin"})):(d(),S(p(b),{key:1,icon:"mdi:content-save",class:"w-4 h-4 mr-2"})),x(" "+r(u.value?"Creating...":"Create Invoice"),1)],8,ve)])],32)])])}}});export{fe as default};
