import{d as N,g as $,r as g,e as v,f as A,c as p,a as e,b as c,w as _,u as i,h as B,i as l,v as n,j as V,F as D,k as S,l as y,t as d,m as U,n as M,p as E,o as r,I as b}from"./index-zronXHME.js";const J={class:"mb-6"},Q={class:"flex items-center justify-between"},O={class:"flex space-x-3"},X={class:"bg-white shadow-sm rounded-lg p-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Z=["value"],z={class:"flex items-center justify-between mb-4"},G={class:"overflow-hidden border border-gray-200 rounded-lg"},H={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},W={class:"px-4 py-3"},ee=["onUpdate:modelValue"],te={class:"px-4 py-3"},se=["onUpdate:modelValue"],oe={class:"px-4 py-3"},ae=["onUpdate:modelValue"],le={class:"px-4 py-3 text-gray-900 font-medium"},ne={class:"px-4 py-3 text-center"},de=["onClick"],ie={class:"border-t border-gray-200 pt-6"},re={class:"flex justify-end"},ue={class:"w-64 space-y-2"},me={class:"flex justify-between text-sm"},pe={class:"font-medium"},ce={class:"flex justify-between text-sm"},be={class:"text-gray-500"},xe={class:"font-medium"},ve={class:"flex justify-between text-lg font-semibold border-t border-gray-200 pt-2"},ye={class:"flex justify-between text-sm text-green-600"},fe={class:"flex justify-between text-sm font-medium text-red-600"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},we={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},he=["disabled"],_e=N({__name:"InvoiceEditView",setup(ke){const P=$(),q=E(),x=P.params.id,m=g(!1),s=g({number:"",clientId:"",date:"",dueDate:"",status:"draft",taxRate:0,amountPaid:0,notes:"",lineItems:[{description:"",quantity:1,rate:0}]}),j=g([{id:1,name:"John Smith",email:"john.smith@email.com",company:"Smith Consulting LLC",documentType:"passport",documentNumber:"P123456789"},{id:2,name:"Sarah Johnson",email:"sarah.johnson@techcorp.com",company:"TechCorp Solutions",documentType:"driver_license",documentNumber:"DL987654321"},{id:3,name:"Michael Brown",email:"michael.brown@startup.io",company:"StartupXYZ Inc",documentType:"national_id",documentNumber:"ID456789123"}]),f=v(()=>s.value.lineItems.reduce((a,t)=>a+t.quantity*t.rate,0).toFixed(2)),w=v(()=>(parseFloat(f.value)*(s.value.taxRate/100)).toFixed(2)),h=v(()=>(parseFloat(f.value)+parseFloat(w.value)).toFixed(2)),C=v(()=>(parseFloat(h.value)-s.value.amountPaid).toFixed(2)),F=a=>(a.quantity*a.rate).toFixed(2),R=()=>{s.value.lineItems.push({description:"",quantity:1,rate:0})},T=a=>{s.value.lineItems.length>1&&s.value.lineItems.splice(a,1)},L=async()=>{m.value=!0;try{console.log("Updating invoice:",s.value),await new Promise(a=>setTimeout(a,1e3)),q.push(`/app/invoices/${x}`)}catch(a){console.error("Error updating invoice:",a)}finally{m.value=!1}};return A(()=>{console.log("Loading invoice for editing:",x),s.value={number:"INV-2024-001",clientId:"1",date:"2024-01-15",dueDate:"2024-02-15",status:"pending",taxRate:19,amountPaid:500,notes:"Payment due within 30 days. Late fees may apply after due date.",lineItems:[{description:"Frontend Development - React.js with responsive design",quantity:40,rate:25},{description:"Backend Integration - API development and database setup",quantity:20,rate:35},{description:"Testing & QA - Comprehensive testing and quality assurance",quantity:10,rate:45}]}}),(a,t)=>{const k=M("router-link");return r(),p("div",null,[e("div",J,[e("div",Q,[t[9]||(t[9]=e("div",null,[e("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Edit Invoice "),e("p",{class:"mt-1 text-sm text-gray-500"}," Update invoice information and line items ")],-1)),e("div",O,[c(k,{to:`/app/invoices/${i(x)}`,class:"inline-flex items-center rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700"},{default:_(()=>[c(i(b),{icon:"mdi:arrow-left",class:"w-4 h-4 mr-2"}),t[8]||(t[8]=y(" Back to Invoice ",-1))]),_:1},8,["to"])])])]),e("div",X,[e("form",{onSubmit:B(L,["prevent"]),class:"space-y-6"},[e("div",Y,[e("div",null,[t[10]||(t[10]=e("label",{for:"number",class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Number * ",-1)),l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.value.number=o),id:"number",type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"INV-001"},null,512),[[n,s.value.number]])]),e("div",null,[t[12]||(t[12]=e("label",{for:"client",class:"block text-sm font-medium text-gray-700 mb-2"}," Client * ",-1)),l(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>s.value.clientId=o),id:"client",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[t[11]||(t[11]=e("option",{value:""},"Select client",-1)),(r(!0),p(D,null,S(j.value,o=>(r(),p("option",{key:o.id,value:o.id},d(o.name),9,Z))),128))],512),[[V,s.value.clientId]])]),e("div",null,[t[13]||(t[13]=e("label",{for:"date",class:"block text-sm font-medium text-gray-700 mb-2"}," Invoice Date * ",-1)),l(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>s.value.date=o),id:"date",type:"date",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,s.value.date]])]),e("div",null,[t[14]||(t[14]=e("label",{for:"dueDate",class:"block text-sm font-medium text-gray-700 mb-2"}," Due Date * ",-1)),l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>s.value.dueDate=o),id:"dueDate",type:"date",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},null,512),[[n,s.value.dueDate]])]),e("div",null,[t[16]||(t[16]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),l(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.value.status=o),id:"status",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...t[15]||(t[15]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"sent"},"Sent",-1),e("option",{value:"paid"},"Paid",-1),e("option",{value:"overdue"},"Overdue",-1)])],512),[[V,s.value.status]])]),e("div",null,[t[17]||(t[17]=e("label",{for:"amountPaid",class:"block text-sm font-medium text-gray-700 mb-2"}," Amount Paid ",-1)),l(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.value.amountPaid=o),id:"amountPaid",type:"number",min:"0",step:"0.01",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"0.00"},null,512),[[n,s.value.amountPaid,void 0,{number:!0}]])])]),e("div",null,[e("div",z,[t[19]||(t[19]=e("h3",{class:"text-lg font-medium text-gray-900"},"Line Items",-1)),e("button",{type:"button",onClick:R,class:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[c(i(b),{icon:"mdi:plus",class:"w-4 h-4 mr-2"}),t[18]||(t[18]=y(" Add Item ",-1))])]),e("div",G,[e("table",H,[t[20]||(t[20]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Description "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quantity "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rate "),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Amount "),e("th",{class:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",K,[(r(!0),p(D,null,S(s.value.lineItems,(o,I)=>(r(),p("tr",{key:I},[e("td",W,[l(e("input",{"onUpdate:modelValue":u=>o.description=u,type:"text",class:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"Item description"},null,8,ee),[[n,o.description]])]),e("td",te,[l(e("input",{"onUpdate:modelValue":u=>o.quantity=u,type:"number",min:"0",step:"0.01",class:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"0"},null,8,se),[[n,o.quantity,void 0,{number:!0}]])]),e("td",oe,[l(e("input",{"onUpdate:modelValue":u=>o.rate=u,type:"number",min:"0",step:"0.01",class:"block w-full border-0 p-0 text-gray-900 placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"0.00"},null,8,ae),[[n,o.rate,void 0,{number:!0}]])]),e("td",le," $"+d(F(o)),1),e("td",ne,[e("button",{type:"button",onClick:u=>T(I),class:"text-red-600 hover:text-red-900"},[c(i(b),{icon:"mdi:delete",class:"w-4 h-4"})],8,de)])]))),128))])])])]),e("div",ie,[e("div",re,[e("div",ue,[e("div",me,[t[21]||(t[21]=e("span",{class:"text-gray-500"},"Subtotal:",-1)),e("span",pe,"$"+d(f.value),1)]),e("div",ce,[e("span",be,"Tax ("+d(s.value.taxRate)+"%):",1),e("span",xe,"$"+d(w.value),1)]),e("div",ve,[t[22]||(t[22]=e("span",null,"Total:",-1)),e("span",null,"$"+d(h.value),1)]),e("div",ye,[t[23]||(t[23]=e("span",null,"Amount Paid:",-1)),e("span",null,"$"+d(s.value.amountPaid.toFixed(2)),1)]),e("div",fe,[t[24]||(t[24]=e("span",null,"Balance Due:",-1)),e("span",null,"$"+d(C.value),1)])])])]),e("div",ge,[e("div",null,[t[25]||(t[25]=e("label",{for:"taxRate",class:"block text-sm font-medium text-gray-700 mb-2"}," Tax Rate (%) ",-1)),l(e("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.value.taxRate=o),id:"taxRate",type:"number",min:"0",max:"100",step:"0.01",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"0.00"},null,512),[[n,s.value.taxRate,void 0,{number:!0}]])])]),e("div",null,[t[26]||(t[26]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),l(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.value.notes=o),id:"notes",rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Additional notes for the invoice"},null,512),[[n,s.value.notes]])]),e("div",we,[c(k,{to:`/app/invoices/${i(x)}`,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:_(()=>[...t[27]||(t[27]=[y(" Cancel ",-1)])]),_:1},8,["to"]),e("button",{type:"submit",disabled:m.value,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50"},[m.value?(r(),U(i(b),{key:0,icon:"mdi:loading",class:"w-4 h-4 mr-2 animate-spin"})):(r(),U(i(b),{key:1,icon:"mdi:content-save",class:"w-4 h-4 mr-2"})),y(" "+d(m.value?"Saving...":"Save Changes"),1)],8,he)])],32)])])}}});export{_e as default};
