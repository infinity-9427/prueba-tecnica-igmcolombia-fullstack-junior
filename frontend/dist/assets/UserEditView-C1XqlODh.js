import{d as _,g as q,r as i,e as R,f as A,c as g,a as s,b as d,w as x,u as r,h as B,i as l,v as u,j as k,q as D,K as h,J as P,F as $,k as j,m as V,l as w,t as U,n as F,p as J,o as m,I as b}from"./index-zronXHME.js";const T={class:"mb-6"},L={class:"flex items-center justify-between"},K={class:"bg-white shadow-sm rounded-lg p-6"},z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},G={class:"border-t border-gray-200 pt-6"},H={class:"flex items-center mb-4"},O={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Q={class:"relative"},W=["type"],X={class:"relative"},Y=["type"],Z={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ee=["value"],se={class:"ml-2 text-sm text-gray-700"},te={class:"flex justify-end space-x-3 pt-6 border-t border-gray-200"},oe=["disabled"],ae=_({__name:"UserEditView",setup(le){const C=q(),S=J(),p=C.params.id,n=i(!1),a=i(!1),v=i(!1),f=i(!1),t=i({firstName:"",lastName:"",name:"",email:"",role:"",status:"active",phone:"",department:"",password:"",confirmPassword:"",notes:"",permissions:[]}),N=[{key:"view_invoices",label:"View Invoices"},{key:"create_invoices",label:"Create Invoices"},{key:"edit_invoices",label:"Edit Invoices"},{key:"delete_invoices",label:"Delete Invoices"},{key:"view_clients",label:"View Clients"},{key:"manage_clients",label:"Manage Clients"},{key:"view_users",label:"View Users"},{key:"manage_users",label:"Manage Users"},{key:"view_reports",label:"View Reports"},{key:"system_settings",label:"System Settings"}],E=R(()=>a.value?t.value.password&&t.value.confirmPassword&&t.value.password===t.value.confirmPassword:!0),M=async()=>{if(a.value&&t.value.password!==t.value.confirmPassword){alert("Passwords do not match");return}n.value=!0;try{console.log("Updating user:",t.value),await new Promise(c=>setTimeout(c,1e3)),S.push(`/app/users/${p}`)}catch(c){console.error("Error updating user:",c)}finally{n.value=!1}};return A(()=>{console.log("Loading user for editing:",p),t.value={firstName:"John",lastName:"Smith",name:"John Smith",email:"john.smith@invoiceapp.com",role:"admin",status:"active",phone:"+1-555-0201",department:"Administration",password:"",confirmPassword:"",notes:"System administrator with full access privileges. Responsible for user management and system configuration.",permissions:["view_invoices","create_invoices","edit_invoices","delete_invoices","view_clients","manage_clients","view_users","manage_users","view_reports","system_settings"]}}),(c,e)=>{const y=F("router-link");return m(),g("div",null,[s("div",T,[s("div",L,[e[14]||(e[14]=s("div",null,[s("h2",{class:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:text-3xl sm:tracking-tight"}," Edit User "),s("p",{class:"mt-1 text-sm text-gray-500"}," Update user information and permissions ")],-1)),d(y,{to:`/app/users/${r(p)}`,class:"inline-flex items-center rounded-md bg-gray-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700"},{default:x(()=>[d(r(b),{icon:"mdi:arrow-left",class:"w-4 h-4 mr-2"}),e[13]||(e[13]=w(" Back to User ",-1))]),_:1},8,["to"])])]),s("div",K,[s("form",{onSubmit:B(M,["prevent"]),class:"space-y-6"},[s("div",z,[s("div",null,[e[15]||(e[15]=s("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2"}," Full Name * ",-1)),l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.name=o),id:"name",type:"text",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter full name"},null,512),[[u,t.value.name]])]),s("div",null,[e[16]||(e[16]=s("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address * ",-1)),l(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.email=o),id:"email",type:"email",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter email address"},null,512),[[u,t.value.email]])]),s("div",null,[e[18]||(e[18]=s("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-2"}," Role * ",-1)),l(s("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.role=o),id:"role",required:"",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...e[17]||(e[17]=[s("option",{value:""},"Select role",-1),s("option",{value:"user"},"User",-1),s("option",{value:"manager"},"Manager",-1),s("option",{value:"admin"},"Admin",-1)])],512),[[k,t.value.role]])]),s("div",null,[e[20]||(e[20]=s("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-2"}," Status ",-1)),l(s("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.value.status=o),id:"status",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"},[...e[19]||(e[19]=[s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"pending"},"Pending",-1)])],512),[[k,t.value.status]])]),s("div",null,[e[21]||(e[21]=s("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Phone Number ",-1)),l(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>t.value.phone=o),id:"phone",type:"tel",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter phone number"},null,512),[[u,t.value.phone]])]),s("div",null,[e[22]||(e[22]=s("label",{for:"department",class:"block text-sm font-medium text-gray-700 mb-2"}," Department ",-1)),l(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>t.value.department=o),id:"department",type:"text",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter department"},null,512),[[u,t.value.department]])])]),s("div",G,[s("div",H,[l(s("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>a.value=o),id:"resetPassword",type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[h,a.value]]),e[23]||(e[23]=s("label",{for:"resetPassword",class:"ml-2 text-sm font-medium text-gray-700"}," Reset password ",-1))]),a.value?(m(),g("div",O,[s("div",null,[e[24]||(e[24]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password * ",-1)),s("div",Q,[l(s("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>t.value.password=o),id:"password",type:v.value?"text":"password",required:"",class:"block w-full pr-12 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Enter new password"},null,8,W),[[P,t.value.password]]),s("button",{type:"button",onClick:e[8]||(e[8]=o=>v.value=!v.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600"},[d(r(b),{icon:v.value?"mdi:eye":"mdi:eye-off",class:"h-5 w-5"},null,8,["icon"])])])]),s("div",null,[e[25]||(e[25]=s("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm Password * ",-1)),s("div",X,[l(s("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>t.value.confirmPassword=o),id:"confirmPassword",type:f.value?"text":"password",required:"",class:"block w-full pr-12 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Confirm new password"},null,8,Y),[[P,t.value.confirmPassword]]),s("button",{type:"button",onClick:e[10]||(e[10]=o=>f.value=!f.value),class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-400 hover:text-gray-600"},[d(r(b),{icon:f.value?"mdi:eye":"mdi:eye-off",class:"h-5 w-5"},null,8,["icon"])])])])])):D("",!0)]),s("div",null,[e[26]||(e[26]=s("label",{for:"notes",class:"block text-sm font-medium text-gray-700 mb-2"}," Notes ",-1)),l(s("textarea",{"onUpdate:modelValue":e[11]||(e[11]=o=>t.value.notes=o),id:"notes",rows:"3",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"Additional notes about the user"},null,512),[[u,t.value.notes]])]),s("div",null,[e[27]||(e[27]=s("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Permissions ",-1)),s("div",Z,[(m(),g($,null,j(N,o=>s("label",{key:o.key,class:"flex items-center"},[l(s("input",{"onUpdate:modelValue":e[12]||(e[12]=I=>t.value.permissions=I),value:o.key,type:"checkbox",class:"rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,8,ee),[[h,t.value.permissions]]),s("span",se,U(o.label),1)])),64))])]),s("div",te,[d(y,{to:`/app/users/${r(p)}`,class:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:x(()=>[...e[28]||(e[28]=[w(" Cancel ",-1)])]),_:1},8,["to"]),s("button",{type:"submit",disabled:n.value||a.value&&!E.value,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},[n.value?(m(),V(r(b),{key:0,icon:"mdi:loading",class:"w-4 h-4 mr-2 animate-spin"})):(m(),V(r(b),{key:1,icon:"mdi:content-save",class:"w-4 h-4 mr-2"})),w(" "+U(n.value?"Saving...":"Save Changes"),1)],8,oe)])],32)])])}}});export{ae as default};
